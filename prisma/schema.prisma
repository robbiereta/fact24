// This is your Prisma schema file
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Empleado {
  id                    Int      @id @default(autoincrement())
  nombreCompleto        String
  rfc                   String   @unique
  curp                  String   @unique
  numeroSeguridadSocial String   @unique
  codigoPostal         String
  fechaIngreso         DateTime
  regimenContratacion  String
  tipoContrato         String
  tipoJornada          String
  salarioBaseCotizacion Decimal
  salarioDiarioIntegrado Decimal
  periodicidadPago     String
  riesgoPuesto         String
  departamento         String
  puesto               String
  banco                String?
  cuentaBancaria       String?
  correoElectronico    String
  telefono             String
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  receipts             Receipt[]
}

model Receipt {
  id          String    @id @default(uuid())
  date        DateTime  @default(now())
  amount      Decimal
  status      String    @default("completed")
  items       Json?
  empleado    Empleado  @relation(fields: [empleadoId], references: [id])
  empleadoId  Int
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  cashClosing CashClosing? @relation(fields: [cashClosingId], references: [id])
  cashClosingId String?
}

model DatosNegocio {
  id               Int      @id @default(autoincrement())
  razonSocial      String
  rfc              String
  regimenFiscal    String
  codigoPostal     String
  registroPatronal String
  curp             String
  direccion        Json?
  telefono         String?
  correoElectronico String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model CashClosing {
  id            String    @id @default(uuid())
  date          DateTime  @default(now())
  totalAmount   Decimal
  receiptCount  Int
  receipts      Receipt[]
  employeeSummary Json
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  notes         String?
}
